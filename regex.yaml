catnum: ({prefix} ?{number}{suffix}?)
mask: \b((?:{code} ?{filler}?{catnum}\b|(?<!{code}[ -]){filler}{catnum} \({code}\))(({join_discrete}|{join_range}){catnum})*)
range_mask: \b({catnum}{join_range}{catnum})\b
discrete_mask: \b({catnum}({join_discrete}{catnum})+)\b

# Museum codes (e.g., USNM)
code: (USNM|NMNH)

# Words found between prefix and number (e.g., USNM No. 12345). This is a non-
# capture group that includes whitespace/punctuation before/after.
filler: (?:\(?(?:(?:[Tt]ype) |(?:(?:[A-Za-z\.]+ )*[Cc]oll(?:\.|ection)? ))?([Nn]os?\.? |[Nn]umbers? |# ?)|specimens? |[A-z]+ [Cc]oll(?:\.|ection)?)

# Uncoded catalog number (e.g., G3551-00, 111234/44, 111123.0001)
prefix: (?:[A-Z]{0,3})
number: (?:(?:[IlO0-9'](?=(?:\d|[A-Za-z]\b|\b))){1,7})
suffix: (?:(?:[A-Za-z]| ?[-/,] ?[A-Z0-9]{1,4}))

# Identifies non-standard suffixes
suffix2: (( \d{1,4}| [A-z] ?\d| [A-z]{1,3}| \d{1,2} \d{1,2}| \d{1,2} [A-z])?[A-z]?)$

# Conjunctions that may be used to join multiple numbers (e.g, USNM 123 and 345)
join_discrete: '(,?\sand\s|[,;]\s|(\s(?=\d{1,6}(?!\.\d)\b))+)'
join_range: '(\sthru\s|\sthrough\s|\s?--?\s?)'
join_interrupted: (USNM|NMNH)([0-9] ?)+

# Test words
test:
    - USNM 3369 13823 345225 346582 489406
    - USNM5312-1 381-3 51-2 3 19 5 8
    - USNM 9731 1 - 13
    - USNM 1081 0.106 44.766
    - NMNH specimens 112345 through 112348
    - USNM 111240/52 USNM 113087 78-80 34-38 10-12 9 51
    - USNM 192947-50 164359-60
    - e of MHNJP 708 709 USNM 504332 571257 and 5 7 12 5 8 with sk
    - USNM 144786a
    - USNM Coll. No. 23 1376 231377
    - USNM115418-60-2
    - USNMNo. 3883A-2
    - (USNM 426-l and HU-1)
    - USNM204287 204288
    - Carapace USNM 528 543 (Pl. 3 Fig. 10a). Par...
    - USNM 159331-2 165090
    - 97; 4 July 1984; USNM 23 4297 (paratype 1 ovigero
    - USNM mollusc coll. 123456
    - type no. 44661 (USNM)
    - USNM B240-B243 and B245-B247
    - USNM type no. 4661 USNM type no. 4662
    - USNM collection No. 74030
    - USNM Coll. No. 72339
    - USNM Helminthol. Coll. No. 81445
    - USNM Helminthological Collection No. 75125
    - 'USNM type # 10660'
    - USNM Type No. 10660
    - NMNH G4998-5003
    - NMNH 246892-3
    - NMNH 123456-59
    - USNM 83943b
    - USNM 16215 16216 16217
    - USNM 39958O
    - USNM G3551-00
    - NMNH 123456/78
    - 'USNM #12345'
    - 'USNM#123456'
    - USNM No. 234567
    - NMNH No. 11742-00, 11743-00, and 11745-00
    - USNM 123456 and 1234567
    - USNM 234567-234571
    - 'USNM # R12596'
    # The test strings below should not yield any catalog numbers
    - NMNH 1234567890
    - Dyak coll. 190010408-9 (USNM)

# If True, only checks the first entry in the list of test values when running
# specimens.py directly
debug: True
troubleshoot: False
